TMC_X1 = 0
TMC_X2 = 1
TMC_Y1 = 2
TMC_Y2 = 3
TMC_Z = 4
TOTAL_TMCS = 5
CMD_RTL_V2 = 94
TMC_COMMAND_BIT_SIZE = 5
MOTOR_OFFSET_MASK = 15
MOTOR_OFFSET = MOTOR_OFFSET_MASK + 1
DRVCTRL = 0
CHOPCONF = 1
SMARTEN = 2
SGCSCONF = 3
DRVCONF = 4
REG_RESPONSE_LEN = 1 + 5 + 5
TM_RESPONSE_LEN = 6
SET_DRVCTRL = DRVCTRL
SET_CHOPCONF = CHOPCONF
SET_SMARTEN = SMARTEN
SET_SGCSCONF = SGCSCONF
SET_DRVCONF = DRVCONF
SET_IDLE_CURRENT = 5
SET_ACTIVE_CURRENT = 6
SET_MOTOR_ENERGIZED = 7
SET_SG_ALARM_TRSHLD = 8
SET_THERMAL_COEFF = 9
SET_MAX_SG_STEP_US = 10
SET_SG_ALARM = 100
SET_CALIBR_MODE = 101
RESTORE_TMC_DEFAULTS = 104
STORE_TMC_PARAMS = 105
GET_REGISTERS = 106
WDT_TMC_TEST = 107
REPORT_STALLS = 108
UPLOAD_CALIBR_VALUE = 109
REPORT_RAW_SG = 110
TMC_CALIBRATION_MODE_INIT = 1
TMC_CALIBRATION_COMPUTE = 2
TMC_CALIBRATION_REPORT = 4
TMC_CALIBRATION_INIT_X = 32
TMC_CALIBRATION_INIT_Y = 64
TMC_CALIBRATION_INIT_Z = 128
TMC_CALIBRATION_INIT_ALL = 16
TMC_MAX_CURRENT = 31
TMC_MED_CURRENT = 15
SE_OFF = 0
SE_DEFAULT = 7
SG_step_periods_us = [
    6250,
    6036,
    5829,
    5630,
    5437,
    5251,
    5071,
    4898,
    4730,
    4568,
    4412,
    4261,
    4115,
    3974,
    3838,
    3707,
    3580,
    3458,
    3339,
    3225,
    3115,
    3008,
    2905,
    2806,
    2710,
    2617,
    2527,
    2441,
    2357,
    2277,
    2199,
    2123,
    2051,
    1980,
    1913,
    1847,
    1784,
    1723,
    1664,
    1607,
    1552,
    1499,
    1448,
    1398,
    1350,
    1304,
    1259,
    1216,
    1175,
    1134,
    1096,
    1058,
    1022,
    987,
    953,
    921,
    889,
    859,
    829,
    801,
    773,
    747,
    721,
    697,
    673,
    650,
    628,
    606,
    585,
    565,
    546,
    527,
    509,
    492,
    475,
    459,
    443,
    428,
    413,
    399,
    385,
    372,
    359,
    347,
    335,
    324,
    313,
    302,
    292,
    282,
    272,
    263,
    254,
    245,
    237,
    229,
    221,
    213,
    206,
    199,
    192,
    185,
    179,
    173,
    167,
    161,
    156,
    151,
    145,
    140,
    136,
    131,
    126,
    122,
    118,
    114,
    110,
    106,
    103,
    99,
    96,
    92,
    89,
    86,
    83,
    80,
    78,
    75,
]
TMC_REG_CMD_LENGTH = 4
TMC_GBL_CMD_LENGTH = 1
MRES_MASK = 15
DEDGE_MASK = 1
INTERPOL_MASK = 1
MRES_SHIFT = 0
DEDGE_SHIFT = 8
INTERPOL_SHIFT = 9
TOFF_MASK = 15
HSTRT_MASK = 7
HEND_MASK = 15
HDEC_MASK = 3
RNDTF_MASK = 1
CHM_MASK = 1
TBL_MASK = 3
TOFF_SHIFT = 0
HSTRT_SHIFT = 4
HEND_SHIFT = 7
HDEC_SHIFT = 11
RNDTF_SHIFT = 13
CHM_SHIFT = 14
TBL_SHIFT = 15
SEMIN_MASK = 15
SEUP_MASK = 3
SEMAX_MASK = 15
SEDN_MASK = 3
SEIMIN_MASK = 1
SEMIN_SHIFT = 0
SEUP_SHIFT = 5
SEMAX_SHIFT = 8
SEDN_SHIFT = 13
SEIMIN_SHIFT = 15
CS_MASK = 31
SGT_MASK = 127
SFILT_MASK = 1
CS_SHIFT = 0
SGT_SHIFT = 8
SFILT_SHIFT = 16
ENS2VS_MASK = 1
SHRTSENS_MASK = 1
RDSEL_MASK = 3
VSENSE_MASK = 1
SDOFF_MASK = 1
TS2G_MASK = 3
DISS2G_MASK = 1
SLP2_MASK = 1
SLPL_MASK = 3
SLPH_MASK = 3
TST_MASK = 1
ENS2VS_SHIFT = 0
SHRTSENS_SHIFT = 2
RDSEL_SHIFT = 4
VSENSE_SHIFT = 6
SDOFF_SHIFT = 7
TS2G_SHIFT = 8
DISS2G_SHIFT = 10
SLP2_SHIFT = 11
SLPL_SHIFT = 12
SLPH_SHIFT = 14
TST_SHIFT = 16
SET_MRES = 301
SET_DEDGE = 302
SET_INTERPOL = 303
SET_TOFF = 304
SET_HSTRT = 305
SET_HEND = 306
SET_HDEC = 307
SET_RNDTF = 308
SET_CHM = 309
SET_TBL = 310
SET_SEMIN = 311
SET_SEUP = 312
SET_SEMAX = 313
SET_SEDN = 314
SET_SEIMIN = 315
SET_CS = 316
SET_SGT = 317
SET_SFILT = 318
SET_RDSEL = 319
SET_VSENSE = 320
SET_SDOFF = 321
SET_TS2G = 322
SET_DISS2G = 323
SET_SLPL = 324
SET_SLPH = 325
SET_TST = 326
SET_CACB = 327
cmdMatrix = [
    [DRVCTRL, SET_DRVCTRL, MRES_MASK, MRES_SHIFT],
    [DRVCTRL, SET_DRVCTRL, DEDGE_MASK, DEDGE_SHIFT],
    [DRVCTRL, SET_DRVCTRL, INTERPOL_MASK, INTERPOL_SHIFT],
    [CHOPCONF, SET_CHOPCONF, TOFF_MASK, TOFF_SHIFT],
    [CHOPCONF, SET_CHOPCONF, HSTRT_MASK, HSTRT_SHIFT],
    [CHOPCONF, SET_CHOPCONF, HEND_MASK, HEND_SHIFT],
    [CHOPCONF, SET_CHOPCONF, HDEC_MASK, HDEC_SHIFT],
    [CHOPCONF, SET_CHOPCONF, RNDTF_MASK, RNDTF_SHIFT],
    [CHOPCONF, SET_CHOPCONF, CHM_MASK, CHM_SHIFT],
    [CHOPCONF, SET_CHOPCONF, TBL_MASK, TBL_SHIFT],
    [SMARTEN, SET_SMARTEN, SEMIN_MASK, SEMIN_SHIFT],
    [SMARTEN, SET_SMARTEN, SEUP_MASK, SEUP_SHIFT],
    [SMARTEN, SET_SMARTEN, SEMAX_MASK, SEMAX_SHIFT],
    [SMARTEN, SET_SMARTEN, SEDN_MASK, SEDN_SHIFT],
    [SMARTEN, SET_SMARTEN, SEIMIN_MASK, SEIMIN_SHIFT],
    [SGCSCONF, SET_DRVCTRL, CS_MASK, CS_SHIFT],
    [SGCSCONF, SET_DRVCTRL, SGT_MASK, SGT_SHIFT],
    [SGCSCONF, SET_DRVCTRL, SFILT_MASK, SFILT_SHIFT],
    [DRVCONF, SET_DRVCONF, ENS2VS_MASK, ENS2VS_SHIFT],
    [DRVCONF, SET_DRVCONF, SHRTSENS_MASK, SHRTSENS_SHIFT],
    [DRVCONF, SET_DRVCONF, RDSEL_MASK, RDSEL_SHIFT],
    [DRVCONF, SET_DRVCONF, VSENSE_MASK, VSENSE_SHIFT],
    [DRVCONF, SET_DRVCONF, SDOFF_MASK, SDOFF_SHIFT],
    [DRVCONF, SET_DRVCONF, TS2G_MASK, TS2G_SHIFT],
    [DRVCONF, SET_DRVCONF, DISS2G_MASK, DISS2G_SHIFT],
    [DRVCONF, SET_DRVCONF, SLP2_MASK, SLP2_SHIFT],
    [DRVCONF, SET_DRVCONF, SLPL_MASK, SLPL_SHIFT],
    [DRVCONF, SET_DRVCONF, SLPH_MASK, SLPH_SHIFT],
    [DRVCONF, SET_DRVCONF, TST_MASK, TST_SHIFT],
]
COMMAND_LENGTH_BYTES = 1
RTL_V2_COMMAND_SIZE_MIN = 4
RTL_V2_COMMAND_SIZE_MAX = 20
SERIAL_NUMBER_LEN = 12
PRODUCT_VERSION_LEN = 8
SET_RGB_LED_STATE = 1
SET_SPINDLE_SPEED = 2
SET_EXTRACTION_STATE = 3
SET_LASER_DATUM_STATE = 4
SET_SERIAL_NUMBER = 5
SET_PRODUCT_VERSION = 6
GET_SERIAL_NUMBER = 7
GET_PRODUCT_VERSION = 8
GET_ALARM_REASON = 9
GET_DIGITAL_SPINDLE_INFO = 10
RESET_DIGITAL_SPINDLE_BRUSH_TIME = 11
RESET_SEQUENCE_NUMBER = 12
GET_STATISTICS = 13
TMC_COMMAND = 50
SINGLE_MOTOR_HEX_RESP_LENGTH = 12
STATUS_FS_IDENTIFIER = "|FS:"
STATUS_PN_IDENTIFIER = "|Pn:"
STATUS_BF_IDENTIFIER = "|Bf:"
STATUS_LD_IDENTIFIER = "|Ld:"
STATUS_SP_IDENTIFIER = "|Sp:"
STATUS_TC_IDENTIFIER = "|TC:"
STATUS_TM_IDENTIFIER = "|TM:"
STATUS_SG_IDENTIFIER = "|SG:"
STATUS_VOL_IDENTIFIER = "|V:"
STATUS_TCAL_IDENTIFIER = "|TCAL:"
STATUS_TREG_IDENTIFIER = "|TREG:"
STATUS_STAT_IDENTIFIER = "|STAT:"
STATUS_SGAL_IDENTIFIER = "|SGALARM:"
STATUS_ALRM_IDENTIFIER = "|Pa:"
